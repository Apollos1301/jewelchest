{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abtin\\\\Desktop\\\\HTML\\\\dia\\\\client\\\\src\\\\components\\\\pages\\\\ProduktePage.js\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport Navbar_produkte from \"../single_comps/produktePageComps/Navbar_produkte\";\nimport SearchBar from \"../single_comps/produktePageComps/SearchBar\";\nimport SetProducts from \"../single_comps/produktePageComps/SetProducts\";\nimport Products from \"../single_comps/produktePageComps/Products\";\nimport MidCards from \"../single_comps/produktePageComps/MidCards\";\nimport { useRef, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopDiv = styled.div`\n  width: 100%;\n  height: 800px;\n  overflow: hidden;\n`;\n_c = TopDiv;\nconst MidDiv1 = styled.div`\n  width: 100%;\n  margin-top: 10px;\n`;\n_c2 = MidDiv1;\nconst MidDiv2 = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 1600px;\n  height: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 550px;\n\n  border: 1px solid black;\n`;\n_c3 = MidDiv2;\nconst FootDiv = styled.div`\n  margin-top: 140px;\n  width: 100%;\n  height: 300px;\n`;\n_c4 = FootDiv;\n\nfunction ProduktePage(_ref) {\n  _s();\n\n  let {\n    allprods_display,\n    deactProd\n  } = _ref;\n  const allprods = useRef(allprods_display);\n  const [searchChar, setSearchTextChar] = useState(\"\");\n  const filterDeleteList = useRef();\n  const searcher = useRef(false);\n  const find = useRef(true);\n  var [filter, setFilter] = useState([filterKategorie(allprods.current.flat()), filterMarke(allprods.current.flat()), filterMaterial(allprods.current.flat()), filterFarbe(allprods.current.flat())]);\n  var new_prods = useRef([]);\n  var past_prods = allprods_display;\n  past_prods = past_prods.flat();\n  const filterSetts = useRef([]); ////////////////////////////////////////////////////////////////\n\n  function searchText(text) {\n    setSearchTextChar(text);\n\n    if (text) {\n      searcher.current = true;\n    } else {\n      searcher.current = false;\n      allprods.current = allprods_display;\n    }\n  }\n\n  if (searcher.current) {\n    var prods = [];\n    new_prods.current = [];\n\n    for (var i = 0; i < past_prods.length; i++) {\n      var obj_text = past_prods[i].product_keywords.toString();\n      obj_text = obj_text.toLowerCase();\n      var text_ = searchChar.toString();\n      text_ = text_.toLowerCase();\n\n      if (obj_text.search(text_) != -1) {\n        new_prods.current.push(past_prods[i]);\n      }\n    }\n\n    var size = 25;\n\n    for (var i = 0; i < new_prods.current.length; i += size) {\n      prods.push(new_prods.current.slice(i, i + size));\n    }\n\n    if (prods.length > 0) {\n      allprods.current = prods;\n      find.current = true;\n    } else {\n      allprods.current = allprods_display;\n      find.current = false;\n      console.log(\"error nothing found\");\n    }\n  } ////////////////////////////////////////////////////////////////\n\n  /*useEffect(() => {\r\n    var neuProds = [\r\n      filterKategorie(allprods.current.flat()),\r\n      filterMarke(allprods.current.flat()),\r\n      filterMaterial(allprods.current.flat()),\r\n      filterFarbe(allprods.current.flat()),\r\n    ];\r\n    var outputArr = filter;\r\n    var check = false;\r\n    for (let i = 0; i < outputArr.length; i++) {\r\n      for (let j = 0; j < outputArr[i].length; j++) {\r\n        check = false;\r\n        for (let k = 0; k < neuProds[i].length; k++) {\r\n          if (outputArr[i][j][0] == neuProds[i][k][0]) {\r\n            outputArr[i][j][1] = neuProds[i][k][1];\r\n            check = true;\r\n          }\r\n        }\r\n        if (check == false) {\r\n          outputArr[i][j][1] = [];\r\n        }\r\n      }\r\n    }\r\n    setFilter([...outputArr]);\r\n  }, [searchChar]);*/\n  ////////////////////////////////////////////////////////////////\n\n\n  const newFilter = (filter, n, m, setter, prods) => {\n    //setFilter([...filter]);\n    filterSetts.current = [n, m, setter, prods];\n\n    if (filterSetts.current[2]) {\n      let newFilt = addFilter(filterSetts.current);\n      filterDeleteList.current = [];\n      newFilt[0][0].map((item, index) => {\n        if (index > 0) {\n          filterDeleteList.current.push(item);\n        }\n      });\n      let size = 25;\n      let newProds = [];\n\n      for (var i = 0; i < newFilt[1][0][newFilt[1][1] - 1].length; i += size) {\n        newProds.push(newFilt[1][0][newFilt[1][1] - 1].slice(i, i + size));\n      }\n\n      allprods.current = [...newProds];\n      setFilter([...newFilt[0][0][newFilt[0][1] - 1][0]]);\n    } else {\n      let newFilt = deleteFilter(filterSetts.current);\n      filterDeleteList.current = [];\n      newFilt[0][0].map((item, index) => {\n        if (index > 0) {\n          filterDeleteList.current.push(item);\n        }\n      });\n      let size = 25;\n      let newProds = [];\n\n      for (var i = 0; i < newFilt[1][0][newFilt[1][1] - 1].length; i += size) {\n        newProds.push(newFilt[1][0][newFilt[1][1] - 1].slice(i, i + size));\n      }\n\n      allprods.current = [...newProds];\n      setFilter([...newFilt[0][0][newFilt[0][1] - 1][0]]);\n    }\n  };\n\n  const filterlist = useRef([[filter, 999, \"X\"]]);\n  const prodlist = useRef([allprods.current.flat()]);\n\n  const addFilter = filtersetts => {\n    let length1 = filterlist.current.length;\n    let length2 = prodlist.current.length;\n    let allprds = []; //console.log(filterlist.current[length1 - 1][1]);\n    //console.log(filtersetts[0]);\n\n    if (filtersetts[0] == filterlist.current[length1 - 1][1]) {\n      allprds = filtersetts[3].concat(prodlist.current[length2 - 1]);\n    } else {\n      allprds = filtersetts[3];\n    }\n\n    prodlist.current.push(allprds);\n    filterlist.current.push([except(filtersetts[0], prodlist.current[length2], filterlist.current[length1 - 1][0]), filtersetts[0], filtersetts[1]]); //console.log(filterlist.current);\n    //console.log(prodlist.current);\n\n    let endarr = [[filterlist.current, filterlist.current.length], [prodlist.current, prodlist.current.length]];\n    return endarr;\n  };\n\n  const deleteFilter = filtersetts => {\n    let length1 = filterlist.current.length;\n    let length2 = prodlist.current.length;\n    let allprds = [];\n    let ind;\n\n    for (let i = 0; i < length1; i++) {\n      if (filterlist.current[i][2] == filtersetts[1]) {\n        ind = i;\n      }\n    }\n\n    filterlist.current.splice(ind, 1);\n    prodlist.current.splice(ind, 1);\n\n    for (let i = 1; i < filterlist.current.length; i++) {\n      allprds = [];\n      let currentProd = [filterlist.current[i][1], filterlist.current[i][2]];\n\n      for (let j = 0; j < filterlist.current[i - 1][0][currentProd[0]].length; j++) {\n        if (filterlist.current[i - 1][0][currentProd[0]][j][0] == currentProd[1]) {\n          if (currentProd[0] == filterlist.current[i - 1][1]) {\n            allprds = prodlist.current[i - 1].concat(filterlist.current[i - 1][0][currentProd[0]][j][1]);\n          } else {\n            allprds = filterlist.current[i - 1][0][currentProd[0]][j][1];\n          }\n        }\n      }\n\n      prodlist.current[i] = allprds;\n      filterlist.current[i][0] = except(filterlist.current[i][1], prodlist.current[i], filterlist.current[i - 1][0]);\n    } //console.log(filterlist.current);\n    //console.log(prodlist.current);\n\n\n    let endarr = [[filterlist.current, filterlist.current.length], [prodlist.current, prodlist.current.length]];\n    return endarr;\n  };\n\n  console.log(allprods.current);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      overflowY: \"hidden\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TopDiv, {\n      children: /*#__PURE__*/_jsxDEV(Navbar_produkte, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MidDiv1, {\n      children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n        searchOn: searchText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SetProducts, {\n        deactProd: deactProd,\n        filter: filter,\n        setFilter: newFilter,\n        deleteList: filterDeleteList.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), searcher.current ? find.current ? /*#__PURE__*/_jsxDEV(Products, {\n        allprods_display: allprods.current,\n        filter: filter,\n        filterSetts: filterSetts.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"nothing found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Products, {\n        allprods_display: allprods.current,\n        filter: filter,\n        filterSetts: filterSetts.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MidDiv2, {\n      children: /*#__PURE__*/_jsxDEV(MidCards, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FootDiv, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n} //<Products allprods_display={allprods} filter={filterMaker(allprods)} />\n\n\n_s(ProduktePage, \"c00cTNIHjQhYj9JS+SX0bQMw1B0=\");\n\n_c5 = ProduktePage;\nexport default ProduktePage; ////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\nconst except = (out, prods, lastprods) => {\n  let neuProds = [];\n\n  switch (out) {\n    case 0:\n      neuProds = [lastprods[0], filterMarke(prods), filterMaterial(prods), filterFarbe(prods)];\n      break;\n\n    case 1:\n      neuProds = [filterKategorie(prods), lastprods[1], filterMaterial(prods), filterFarbe(prods)];\n      break;\n\n    case 2:\n      neuProds = [filterKategorie(prods), filterMarke(prods), lastprods[2], filterFarbe(prods)];\n      break;\n\n    case 3:\n      neuProds = [filterKategorie(prods), filterMarke(prods), filterMaterial(prods), lastprods[3]];\n      break;\n  }\n\n  let prod = [...lastprods];\n  let endprods = [...neuProds];\n  let check = false;\n\n  for (let i = 0; i < prod.length; i++) {\n    for (let j = 0; j < prod[i].length; j++) {\n      check = false;\n\n      for (let k = 0; k < neuProds[i].length; k++) {\n        if (prod[i][j][0] == neuProds[i][k][0]) {\n          check = true;\n        }\n      }\n\n      if (check !== true) {\n        let a = [...prod[i][j]];\n        a[1] = [];\n        endprods[i].push(a);\n      }\n    }\n  } //console.log(neuProds);\n  //console.log(endprods);\n\n\n  return endprods;\n}; ////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\n\nconst filterKategorie = prods => {\n  let filter = [];\n  let uniq = [];\n  let endArr = [];\n  uniq = [\"Ohrring\", \"Ohrstecker\", \"Kette\", \"Ring\", \"Armband\", \"Creole\"];\n  endArr = [];\n  uniq.map((item, index) => {\n    prods.map((prct, ind) => {\n      if (prct.product_keywords != null) {\n        let prodKategorie = prct.product_keywords.toLowerCase();\n        let savedKategorie = item.toLowerCase();\n\n        if (prodKategorie.search(savedKategorie) != -1) {\n          endArr.push(prct);\n        }\n      }\n    });\n    filter.push([item, endArr, false]);\n    endArr = [];\n  });\n  return filter;\n}; ////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\n\nconst filterMarke = prods => {\n  let filter = [];\n  let uniq = [];\n  let endArr = [];\n  let markenArr = [];\n  prods.map((prod, ind) => {\n    if (prod.product_marke != null) {\n      markenArr.push(prod.product_marke.toLowerCase());\n    }\n  });\n  uniq = [...new Set(markenArr)];\n  uniq.map((item, index) => {\n    prods.map((prct, ind) => {\n      if (prct.product_marke != null) {\n        let prodMarke = prct.product_marke.toLowerCase();\n        let savedMarke = item.toLowerCase();\n\n        if (prodMarke.search(savedMarke) != -1) {\n          endArr.push(prct);\n        }\n      }\n    });\n    filter.push([item, endArr, false]);\n    endArr = [];\n  });\n  return filter;\n}; ////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\n\nconst filterMaterial = prods => {\n  let filter = [];\n  let uniq = [];\n  let endArr = [];\n  let materialArr = [];\n  prods.map((prod, ind) => {\n    if (prod.product_material != null) {\n      materialArr.push(prod.product_material.toLowerCase());\n    }\n  });\n  uniq = [...new Set(materialArr)];\n  uniq.map((item, index) => {\n    prods.map((prct, ind) => {\n      if (prct.product_material != null) {\n        let prodMaterial = prct.product_material.toLowerCase();\n        let savedMaterial = item.toLowerCase();\n\n        if (prodMaterial.search(savedMaterial) != -1) {\n          endArr.push(prct);\n        }\n      }\n    });\n    filter.push([item, endArr, false]);\n    endArr = [];\n  });\n  return filter;\n}; ////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\n\nconst filterFarbe = prods => {\n  let filter = [];\n  let uniq = [];\n  let endArr = [];\n  let farbenArr = [];\n  prods.map((prod, ind) => {\n    if (prod.product_farbe != null) {\n      farbenArr.push(prod.product_farbe.toLowerCase());\n    }\n  });\n  uniq = [...new Set(farbenArr)];\n  uniq.map((item, index) => {\n    prods.map((prct, ind) => {\n      if (prct.product_farbe != null) {\n        let prodFarbe = prct.product_farbe.toLowerCase();\n        let savedFarbe = item.toLowerCase();\n\n        if (prodFarbe.search(savedFarbe) != -1) {\n          endArr.push(prct);\n        }\n      }\n    });\n    filter.push([item, endArr, false]);\n    endArr = [];\n  });\n  return filter;\n};\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"TopDiv\");\n$RefreshReg$(_c2, \"MidDiv1\");\n$RefreshReg$(_c3, \"MidDiv2\");\n$RefreshReg$(_c4, \"FootDiv\");\n$RefreshReg$(_c5, \"ProduktePage\");","map":{"version":3,"sources":["C:/Users/Abtin/Desktop/HTML/dia/client/src/components/pages/ProduktePage.js"],"names":["styled","Navbar_produkte","SearchBar","SetProducts","Products","MidCards","useRef","useState","useEffect","TopDiv","div","MidDiv1","MidDiv2","FootDiv","ProduktePage","allprods_display","deactProd","allprods","searchChar","setSearchTextChar","filterDeleteList","searcher","find","filter","setFilter","filterKategorie","current","flat","filterMarke","filterMaterial","filterFarbe","new_prods","past_prods","filterSetts","searchText","text","prods","i","length","obj_text","product_keywords","toString","toLowerCase","text_","search","push","size","slice","console","log","newFilter","n","m","setter","newFilt","addFilter","map","item","index","newProds","deleteFilter","filterlist","prodlist","filtersetts","length1","length2","allprds","concat","except","endarr","ind","splice","currentProd","j","overflowY","out","lastprods","neuProds","prod","endprods","check","k","a","uniq","endArr","prct","prodKategorie","savedKategorie","markenArr","product_marke","Set","prodMarke","savedMarke","materialArr","product_material","prodMaterial","savedMaterial","farbenArr","product_farbe","prodFarbe","savedFarbe"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\r\nimport Navbar_produkte from \"../single_comps/produktePageComps/Navbar_produkte\";\r\nimport SearchBar from \"../single_comps/produktePageComps/SearchBar\";\r\nimport SetProducts from \"../single_comps/produktePageComps/SetProducts\";\r\nimport Products from \"../single_comps/produktePageComps/Products\";\r\nimport MidCards from \"../single_comps/produktePageComps/MidCards\";\r\nimport { useRef, useState, useEffect } from \"react\";\r\n\r\nconst TopDiv = styled.div`\r\n  width: 100%;\r\n  height: 800px;\r\n  overflow: hidden;\r\n`;\r\nconst MidDiv1 = styled.div`\r\n  width: 100%;\r\n  margin-top: 10px;\r\n`;\r\nconst MidDiv2 = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  width: 1600px;\r\n  height: 800px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 550px;\r\n\r\n  border: 1px solid black;\r\n`;\r\nconst FootDiv = styled.div`\r\n  margin-top: 140px;\r\n  width: 100%;\r\n  height: 300px;\r\n`;\r\nfunction ProduktePage({ allprods_display, deactProd }) {\r\n  const allprods = useRef(allprods_display);\r\n  const [searchChar, setSearchTextChar] = useState(\"\");\r\n  const filterDeleteList = useRef();\r\n  const searcher = useRef(false);\r\n  const find = useRef(true);\r\n  var [filter, setFilter] = useState([\r\n    filterKategorie(allprods.current.flat()),\r\n    filterMarke(allprods.current.flat()),\r\n    filterMaterial(allprods.current.flat()),\r\n    filterFarbe(allprods.current.flat()),\r\n  ]);\r\n  var new_prods = useRef([]);\r\n  var past_prods = allprods_display;\r\n  past_prods = past_prods.flat();\r\n  const filterSetts = useRef([]);\r\n  ////////////////////////////////////////////////////////////////\r\n  function searchText(text) {\r\n    setSearchTextChar(text);\r\n    if (text) {\r\n      searcher.current = true;\r\n    } else {\r\n      searcher.current = false;\r\n      allprods.current = allprods_display;\r\n    }\r\n  }\r\n  if (searcher.current) {\r\n    var prods = [];\r\n    new_prods.current = [];\r\n    for (var i = 0; i < past_prods.length; i++) {\r\n      var obj_text = past_prods[i].product_keywords.toString();\r\n      obj_text = obj_text.toLowerCase();\r\n      var text_ = searchChar.toString();\r\n      text_ = text_.toLowerCase();\r\n      if (obj_text.search(text_) != -1) {\r\n        new_prods.current.push(past_prods[i]);\r\n      }\r\n    }\r\n\r\n    var size = 25;\r\n    for (var i = 0; i < new_prods.current.length; i += size) {\r\n      prods.push(new_prods.current.slice(i, i + size));\r\n    }\r\n    if (prods.length > 0) {\r\n      allprods.current = prods;\r\n      find.current = true;\r\n    } else {\r\n      allprods.current = allprods_display;\r\n      find.current = false;\r\n      console.log(\"error nothing found\");\r\n    }\r\n  }\r\n  ////////////////////////////////////////////////////////////////\r\n  /*useEffect(() => {\r\n    var neuProds = [\r\n      filterKategorie(allprods.current.flat()),\r\n      filterMarke(allprods.current.flat()),\r\n      filterMaterial(allprods.current.flat()),\r\n      filterFarbe(allprods.current.flat()),\r\n    ];\r\n    var outputArr = filter;\r\n    var check = false;\r\n    for (let i = 0; i < outputArr.length; i++) {\r\n      for (let j = 0; j < outputArr[i].length; j++) {\r\n        check = false;\r\n        for (let k = 0; k < neuProds[i].length; k++) {\r\n          if (outputArr[i][j][0] == neuProds[i][k][0]) {\r\n            outputArr[i][j][1] = neuProds[i][k][1];\r\n            check = true;\r\n          }\r\n        }\r\n        if (check == false) {\r\n          outputArr[i][j][1] = [];\r\n        }\r\n      }\r\n    }\r\n    setFilter([...outputArr]);\r\n  }, [searchChar]);*/\r\n  ////////////////////////////////////////////////////////////////\r\n  const newFilter = (filter, n, m, setter, prods) => {\r\n    //setFilter([...filter]);\r\n    filterSetts.current = [n, m, setter, prods];\r\n    if (filterSetts.current[2]) {\r\n      let newFilt = addFilter(filterSetts.current);\r\n      filterDeleteList.current = [];\r\n      newFilt[0][0].map((item, index) => {\r\n        if (index > 0) {\r\n          filterDeleteList.current.push(item);\r\n        }\r\n      });\r\n      let size = 25;\r\n      let newProds = [];\r\n      for (var i = 0; i < newFilt[1][0][newFilt[1][1] - 1].length; i += size) {\r\n        newProds.push(newFilt[1][0][newFilt[1][1] - 1].slice(i, i + size));\r\n      }\r\n      allprods.current = [...newProds];\r\n\r\n      setFilter([...newFilt[0][0][newFilt[0][1] - 1][0]]);\r\n    } else {\r\n      let newFilt = deleteFilter(filterSetts.current);\r\n      filterDeleteList.current = [];\r\n      newFilt[0][0].map((item, index) => {\r\n        if (index > 0) {\r\n          filterDeleteList.current.push(item);\r\n        }\r\n      });\r\n      let size = 25;\r\n      let newProds = [];\r\n      for (var i = 0; i < newFilt[1][0][newFilt[1][1] - 1].length; i += size) {\r\n        newProds.push(newFilt[1][0][newFilt[1][1] - 1].slice(i, i + size));\r\n      }\r\n      allprods.current = [...newProds];\r\n      setFilter([...newFilt[0][0][newFilt[0][1] - 1][0]]);\r\n    }\r\n  };\r\n  const filterlist = useRef([[filter, 999, \"X\"]]);\r\n  const prodlist = useRef([allprods.current.flat()]);\r\n\r\n  const addFilter = (filtersetts) => {\r\n    let length1 = filterlist.current.length;\r\n    let length2 = prodlist.current.length;\r\n    let allprds = [];\r\n    //console.log(filterlist.current[length1 - 1][1]);\r\n    //console.log(filtersetts[0]);\r\n    if (filtersetts[0] == filterlist.current[length1 - 1][1]) {\r\n      allprds = filtersetts[3].concat(prodlist.current[length2 - 1]);\r\n    } else {\r\n      allprds = filtersetts[3];\r\n    }\r\n    prodlist.current.push(allprds);\r\n\r\n    filterlist.current.push([\r\n      except(\r\n        filtersetts[0],\r\n        prodlist.current[length2],\r\n        filterlist.current[length1 - 1][0]\r\n      ),\r\n      filtersetts[0],\r\n      filtersetts[1],\r\n    ]);\r\n    //console.log(filterlist.current);\r\n    //console.log(prodlist.current);\r\n    let endarr = [\r\n      [filterlist.current, filterlist.current.length],\r\n      [prodlist.current, prodlist.current.length],\r\n    ];\r\n    return endarr;\r\n  };\r\n  const deleteFilter = (filtersetts) => {\r\n    let length1 = filterlist.current.length;\r\n    let length2 = prodlist.current.length;\r\n    let allprds = [];\r\n    let ind;\r\n    for (let i = 0; i < length1; i++) {\r\n      if (filterlist.current[i][2] == filtersetts[1]) {\r\n        ind = i;\r\n      }\r\n    }\r\n    filterlist.current.splice(ind, 1);\r\n    prodlist.current.splice(ind, 1);\r\n\r\n    for (let i = 1; i < filterlist.current.length; i++) {\r\n      allprds = [];\r\n      let currentProd = [filterlist.current[i][1], filterlist.current[i][2]];\r\n      for (\r\n        let j = 0;\r\n        j < filterlist.current[i - 1][0][currentProd[0]].length;\r\n        j++\r\n      ) {\r\n        if (\r\n          filterlist.current[i - 1][0][currentProd[0]][j][0] == currentProd[1]\r\n        ) {\r\n          if (currentProd[0] == filterlist.current[i - 1][1]) {\r\n            allprds = prodlist.current[i - 1].concat(\r\n              filterlist.current[i - 1][0][currentProd[0]][j][1]\r\n            );\r\n          } else {\r\n            allprds = filterlist.current[i - 1][0][currentProd[0]][j][1];\r\n          }\r\n        }\r\n      }\r\n      prodlist.current[i] = allprds;\r\n      filterlist.current[i][0] = except(\r\n        filterlist.current[i][1],\r\n        prodlist.current[i],\r\n        filterlist.current[i - 1][0]\r\n      );\r\n    }\r\n    //console.log(filterlist.current);\r\n    //console.log(prodlist.current);\r\n    let endarr = [\r\n      [filterlist.current, filterlist.current.length],\r\n      [prodlist.current, prodlist.current.length],\r\n    ];\r\n    return endarr;\r\n  };\r\n  console.log(allprods.current);\r\n  return (\r\n    <div style={{ overflowY: \"hidden\" }}>\r\n      <TopDiv>\r\n        <Navbar_produkte />\r\n      </TopDiv>\r\n      <MidDiv1>\r\n        <SearchBar searchOn={searchText} />\r\n        <SetProducts\r\n          deactProd={deactProd}\r\n          filter={filter}\r\n          setFilter={newFilter}\r\n          deleteList={filterDeleteList.current}\r\n        />\r\n        {searcher.current ? (\r\n          find.current ? (\r\n            <Products\r\n              allprods_display={allprods.current}\r\n              filter={filter}\r\n              filterSetts={filterSetts.current}\r\n            />\r\n          ) : (\r\n            <div>\r\n              <h1>nothing found</h1>\r\n            </div>\r\n          )\r\n        ) : (\r\n          <Products\r\n            allprods_display={allprods.current}\r\n            filter={filter}\r\n            filterSetts={filterSetts.current}\r\n          />\r\n        )}\r\n      </MidDiv1>\r\n      <MidDiv2>\r\n        <MidCards />\r\n      </MidDiv2>\r\n      <FootDiv></FootDiv>\r\n    </div>\r\n  );\r\n}\r\n//<Products allprods_display={allprods} filter={filterMaker(allprods)} />\r\nexport default ProduktePage;\r\n////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst except = (out, prods, lastprods) => {\r\n  let neuProds = [];\r\n  switch (out) {\r\n    case 0:\r\n      neuProds = [\r\n        lastprods[0],\r\n        filterMarke(prods),\r\n        filterMaterial(prods),\r\n        filterFarbe(prods),\r\n      ];\r\n      break;\r\n    case 1:\r\n      neuProds = [\r\n        filterKategorie(prods),\r\n        lastprods[1],\r\n        filterMaterial(prods),\r\n        filterFarbe(prods),\r\n      ];\r\n      break;\r\n    case 2:\r\n      neuProds = [\r\n        filterKategorie(prods),\r\n        filterMarke(prods),\r\n        lastprods[2],\r\n        filterFarbe(prods),\r\n      ];\r\n      break;\r\n    case 3:\r\n      neuProds = [\r\n        filterKategorie(prods),\r\n        filterMarke(prods),\r\n        filterMaterial(prods),\r\n        lastprods[3],\r\n      ];\r\n      break;\r\n  }\r\n  let prod = [...lastprods];\r\n  let endprods = [...neuProds];\r\n  let check = false;\r\n  for (let i = 0; i < prod.length; i++) {\r\n    for (let j = 0; j < prod[i].length; j++) {\r\n      check = false;\r\n      for (let k = 0; k < neuProds[i].length; k++) {\r\n        if (prod[i][j][0] == neuProds[i][k][0]) {\r\n          check = true;\r\n        }\r\n      }\r\n      if (check !== true) {\r\n        let a = [...prod[i][j]];\r\n        a[1] = [];\r\n        endprods[i].push(a);\r\n      }\r\n    }\r\n  }\r\n  //console.log(neuProds);\r\n  //console.log(endprods);\r\n  return endprods;\r\n};\r\n\r\n////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst filterKategorie = (prods) => {\r\n  let filter = [];\r\n  let uniq = [];\r\n  let endArr = [];\r\n  uniq = [\"Ohrring\", \"Ohrstecker\", \"Kette\", \"Ring\", \"Armband\", \"Creole\"];\r\n  endArr = [];\r\n  uniq.map((item, index) => {\r\n    prods.map((prct, ind) => {\r\n      if (prct.product_keywords != null) {\r\n        let prodKategorie = prct.product_keywords.toLowerCase();\r\n        let savedKategorie = item.toLowerCase();\r\n        if (prodKategorie.search(savedKategorie) != -1) {\r\n          endArr.push(prct);\r\n        }\r\n      }\r\n    });\r\n    filter.push([item, endArr, false]);\r\n    endArr = [];\r\n  });\r\n  return filter;\r\n};\r\n////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n\r\nconst filterMarke = (prods) => {\r\n  let filter = [];\r\n  let uniq = [];\r\n  let endArr = [];\r\n  let markenArr = [];\r\n  prods.map((prod, ind) => {\r\n    if (prod.product_marke != null) {\r\n      markenArr.push(prod.product_marke.toLowerCase());\r\n    }\r\n  });\r\n  uniq = [...new Set(markenArr)];\r\n\r\n  uniq.map((item, index) => {\r\n    prods.map((prct, ind) => {\r\n      if (prct.product_marke != null) {\r\n        let prodMarke = prct.product_marke.toLowerCase();\r\n        let savedMarke = item.toLowerCase();\r\n        if (prodMarke.search(savedMarke) != -1) {\r\n          endArr.push(prct);\r\n        }\r\n      }\r\n    });\r\n    filter.push([item, endArr, false]);\r\n    endArr = [];\r\n  });\r\n  return filter;\r\n};\r\n////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst filterMaterial = (prods) => {\r\n  let filter = [];\r\n  let uniq = [];\r\n  let endArr = [];\r\n  let materialArr = [];\r\n  prods.map((prod, ind) => {\r\n    if (prod.product_material != null) {\r\n      materialArr.push(prod.product_material.toLowerCase());\r\n    }\r\n  });\r\n  uniq = [...new Set(materialArr)];\r\n\r\n  uniq.map((item, index) => {\r\n    prods.map((prct, ind) => {\r\n      if (prct.product_material != null) {\r\n        let prodMaterial = prct.product_material.toLowerCase();\r\n        let savedMaterial = item.toLowerCase();\r\n        if (prodMaterial.search(savedMaterial) != -1) {\r\n          endArr.push(prct);\r\n        }\r\n      }\r\n    });\r\n    filter.push([item, endArr, false]);\r\n    endArr = [];\r\n  });\r\n  return filter;\r\n};\r\n////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst filterFarbe = (prods) => {\r\n  let filter = [];\r\n  let uniq = [];\r\n  let endArr = [];\r\n  let farbenArr = [];\r\n  prods.map((prod, ind) => {\r\n    if (prod.product_farbe != null) {\r\n      farbenArr.push(prod.product_farbe.toLowerCase());\r\n    }\r\n  });\r\n  uniq = [...new Set(farbenArr)];\r\n\r\n  uniq.map((item, index) => {\r\n    prods.map((prct, ind) => {\r\n      if (prct.product_farbe != null) {\r\n        let prodFarbe = prct.product_farbe.toLowerCase();\r\n        let savedFarbe = item.toLowerCase();\r\n        if (prodFarbe.search(savedFarbe) != -1) {\r\n          endArr.push(prct);\r\n        }\r\n      }\r\n    });\r\n    filter.push([item, endArr, false]);\r\n    endArr = [];\r\n  });\r\n  return filter;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}